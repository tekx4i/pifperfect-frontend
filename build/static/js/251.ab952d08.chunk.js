"use strict";(self.webpackChunkdefault_velzon_thunk=self.webpackChunkdefault_velzon_thunk||[]).push([[251],{65251:(s,e,i)=>{i.r(e),i.d(e,{default:()=>d});var t=i(65043),a=i(97550),c=i(72679),l=i(18179),r=i(35489),n=i(39854),o=i(83372),h=(i(52420),i(70579));const d=s=>{var e,i;let{tab:d,roleId:m}=s;const[u,p]=(0,t.useState)(!1),j=localStorage.getItem("token"),[x,v]=(0,t.useState)({}),[f,g]=(0,t.useState)([]),[w,A]=(0,t.useState)(!1),{REACT_APP_API_URL:_}={REACT_APP_API_URL:"https://phpstack-1250693-5093481.cloudwaysapps.com/api/"};(0,t.useEffect)((()=>{(async()=>{p(!0);try{const s=`${_}permissions/role/${m}`,e=await(0,l.Vg)(s,{},j);if(e.success){const s=e.data.allPermissions||[],i=[];s.forEach((s=>{s.permissions.forEach((s=>{s.role_permissions&&s.role_permissions.length>0&&i.push(s.id)}))})),g(i),v(e),A(!1)}}catch(s){console.error("Error fetching permissions:",s)}finally{p(!1)}})()}),[m]);return(0,h.jsxs)("div",{id:"assignPermission",children:[u?(0,h.jsx)(o.z,{baseColor:"#f0f0f0",highlightColor:"#e0e0e0",children:(0,h.jsx)("div",{className:"skeleton-loader",children:Array(5).fill(0).map(((s,e)=>(0,h.jsxs)("div",{className:"skeleton-item",children:[(0,h.jsx)(o.A,{width:200,height:25}),(0,h.jsxs)("div",{className:"row mt-3",children:[(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(o.A,{width:150,height:20}),(0,h.jsx)(o.A,{width:50,height:25,className:"mt-2"})]}),(0,h.jsxs)("div",{className:"col-md-6",children:[(0,h.jsx)(o.A,{width:150,height:20}),(0,h.jsx)(o.A,{width:50,height:25,className:"mt-2"})]})]}),(0,h.jsx)("hr",{className:"ctm-hr mt-4"})]},e)))})}):null===(e=x.data)||void 0===e||null===(i=e.allPermissions)||void 0===i?void 0:i.map((s=>(0,h.jsxs)("div",{children:[(0,h.jsx)("h5",{children:s.name}),(0,h.jsx)("div",{className:"row",children:s.permissions.map((s=>(0,h.jsx)("div",{className:"col-md-6",children:(0,h.jsxs)("div",{className:"switch_custom",children:[(0,h.jsx)("p",{children:s.name}),(0,h.jsx)("div",{className:"switch",children:(0,h.jsx)(a.A,{switch:!0,children:(0,h.jsx)(c.A,{type:"switch",checked:f.includes(s.id),onChange:()=>{return e=s.id,void g((s=>{const i=s.includes(e)?s.filter((s=>s!==e)):[...s,e];return A(!0),i}));var e}})})})]})},s.id)))}),(0,h.jsx)("hr",{className:"ctm-hr"})]},s.id))),(0,h.jsxs)("button",{type:"button",onClick:async()=>{if(!w)return;const s={roleId:m,permissions:f};try{const e=`${_}permissions/assign`;(await(0,l.mu)(e,s,j)).success}catch(e){console.error("Error updating permissions:",e)}finally{A(!1)}},className:"custom_submit_btn",children:[(0,h.jsx)(r.k,{src:n.A}),"Save Changes"]})]})}}}]);
//# sourceMappingURL=251.ab952d08.chunk.js.map